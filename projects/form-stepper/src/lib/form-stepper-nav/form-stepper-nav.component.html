<ul *ngIf="state$ | async as state">
  <li *ngFor="let section of state.nav; let sectionIndex = index">
    <button
      type="button"
      [disabled]="section.offset >= state.maxStepIndexViewed && section.steps[0].control.pristine"
      (click)="navigateByStepIndex($event, section.offset)"
    >
      {{ section.title }}
    </button>

    <span style="color: blue" *ngIf="state.sectionProgression && state.sectionIndex === sectionIndex">
      {{ state.sectionProgression.count }} / {{ state.sectionProgression.total }}
    </span>

    ({{ section.section.valid }})

    <ul>
      <li *ngFor="let step of section.steps; let relativeStepIndex = index">
        <button
          type="button"
          [disabled]="section.offset + relativeStepIndex >= state.maxStepIndexViewed && step.control.pristine"
          (click)="navigateByStepIndex($event, section.offset + relativeStepIndex)"
        >
          {{ step.title }}
        </button>

        <span style="color: blue" *ngIf="state.stepIndex === section.offset + relativeStepIndex"> * </span>

        ({{ step.control.valid }})
      </li>
    </ul>
  </li>
</ul>
