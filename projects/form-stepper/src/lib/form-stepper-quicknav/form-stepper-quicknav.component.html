<ng-container [ngSwitch]="formStepperCompact">
  <ng-container *ngSwitchCase="false">
    <ng-container *ngIf="nav$ | async as nav">
      <ng-container *ngFor="let section of nav">
        <div *ngIf="section.hasQuicknav" class="form-stepper-quicknav__section">
          <h3 class="form-stepper-quicknav__title">
            <form-stepper-section-icon
              class="form-stepper-quicknav__icon"
              [formStepperIcon]="section.icon"
              [formStepperIsValid]="!section.icon"
              [formStepperDisableAnimation]="true"
            ></form-stepper-section-icon>

            {{ section.title }}
          </h3>

          <ng-container [ngTemplateOutlet]="steps" [ngTemplateOutletContext]="{ steps: section.steps }"></ng-container>
        </div>
      </ng-container>
    </ng-container>
  </ng-container>

  <ng-container *ngSwitchCase="true">
    <ng-container *ngIf="nav$ | async as nav">
      <ng-container *ngFor="let section of nav">
        <ng-container
          *ngIf="section.hasQuicknav"
          [ngTemplateOutlet]="steps"
          [ngTemplateOutletContext]="{ steps: section.steps }"
        ></ng-container>
      </ng-container>
    </ng-container>
  </ng-container>
</ng-container>

<ng-template #steps let-steps="steps">
  <div *ngFor="let step of steps">
    <strong>{{ step.title }}:</strong>

    <span class="form-stepper-quicknav__value">{{ getValue(step.control) }}</span>

    <form-stepper-icon
      icon="edit"
      class="form-stepper-quicknav__edit"
      (click)="navigateByStepIndex(step.stepIndex)"
    ></form-stepper-icon>
  </div>
</ng-template>
