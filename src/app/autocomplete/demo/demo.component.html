<pre>{{ value | json }}</pre>

<input
  cdkOverlayOrigin
  #dropDownOrigin="cdkOverlayOrigin"
  autocomplete="off"
  [value]="value"
  [autocompleteInput]="autocomplete"
  #autocompleteInput="autocompleteInput"
/>

<autocomplete-suggestions #autocomplete [(value)]="value" [datalist]="datalist" [inputMinLength]="inputMinLength">
  <ng-template
    *ngIf="autocomplete.suggestions$ | async as suggestions"
    cdkConnectedOverlay
    [cdkConnectedOverlayOrigin]="dropDownOrigin"
    [cdkConnectedOverlayOpen]="autocomplete.shouldDisplaySuggestions && suggestions.length > 0"
  >
    <div class="autocomplete-input__suggestions" [style.width]="autocompleteInput.inputWidthPx">
      <div
        autocompleteSuggestion
        *ngFor="let suggestion of suggestions; index as suggestionIndex"
        class="autocomplete-input__suggestion"
        [class.autocomplete-input__suggestion--focused]="suggestionIndex === autocomplete.focusedSuggestionIndex"
        (click)="autocomplete.selectSuggestion(suggestion)"
      >
        <span [innerHTML]="suggestion | autocompleteHighlightSuggestion: autocomplete.value"></span>

        <span *ngIf="suggestion === autocomplete.value" class="autocomplete-input__suggestion-check">&check;</span>
      </div>
    </div>
  </ng-template>
</autocomplete-suggestions>
