<pre>{{ formGroup.value | json }}</pre>

<form [formGroup]="formGroup">
  <input
    cdkOverlayOrigin
    #dropDownOrigin="cdkOverlayOrigin"
    autocomplete="off"
    formControlName="list"
    [autocompleteInput]="autocomplete"
    #autocompleteInput="autocompleteInput"
  />

  <autocomplete-suggestions
    #autocomplete
    [datalist]="datalist"
    [inputMinLength]="inputMinLength"
    [inputValue]="formGroup.controls.list.value ?? ''"
    (inputValueChange)="formGroup.controls.list.setValue($event)"
  >
    <ng-template
      *ngIf="autocomplete.suggestions$ | async as suggestions"
      cdkConnectedOverlay
      [cdkConnectedOverlayOrigin]="dropDownOrigin"
      [cdkConnectedOverlayOpen]="suggestions.length > 0 && autocomplete.shouldDisplaySuggestions"
    >
      <div class="autocomplete-input__suggestions" [style.width]="autocompleteInput.inputWidthPx">
        <div
          autocompleteSuggestion
          *ngFor="let suggestion of suggestions; index as suggestionIndex"
          class="autocomplete-input__suggestion"
          [class.autocomplete-input__suggestion--focused]="suggestionIndex === autocomplete.focusedSuggestionIndex"
          (click)="autocomplete.selectSuggestion(suggestion)"
        >
          <span [innerHTML]="suggestion | autocompleteHighlightSuggestion: autocomplete.inputValue"></span>

          <span *ngIf="suggestion === autocomplete.inputValue" class="autocomplete-input__suggestion-check">&check;</span>
        </div>
      </div>
    </ng-template>
  </autocomplete-suggestions>
</form>
