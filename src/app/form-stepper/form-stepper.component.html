<form [formGroup]="formGroup" (ngSubmit)="submitForm()">
  <ng-container formStepperContainer #formStepper="formStepper">
    <div style="display: flex; justify-content: center">
      <div style="padding: 3rem">
        <ng-container
          *ngIf="formStepper.stepTemplate$ | async as stepTemplate"
          [ngTemplateOutlet]="stepTemplate"
        ></ng-container>
      </div>

      <div style="padding: 3rem">
        <form-stepper-nav></form-stepper-nav>
      </div>
    </div>

    <div style="padding: 3rem; text-align: center" *ngIf="formStepper.state$ | async as state">
      <button type="button" [disabled]="!state.hasPrevStep" (click)="formStepper.prevStep()">Prev</button>

      <button type="button" [disabled]="!state.hasNextStep || !state.isStepValid" (click)="formStepper.nextStep()">
        Next
      </button>

      <br />{{ state.hasReachedEnd && formGroup.valid ? 'READY TO SUBMIT' : '' }}
    </div>

    <ng-template formStepperOnboarding formStepperPath="onboarding">
      <h1>Onboarding</h1>
    </ng-template>

    <ng-template formStepperSummary formStepperPath="summary">
      <h1>Summary</h1>
      <button type="submit">Submit</button>
    </ng-template>

    <ng-container [formStepperSection]="fullName" formStepperTitle="Full name">
      <ng-template [formStepperStep]="firstName" formStepperTitle="First name" formStepperPath="first-name">
        First name:<br />
        <input [formControl]="firstName" />
      </ng-template>

      <ng-template [formStepperStep]="lastName" formStepperTitle="Last name" formStepperPath="last-name">
        Last name:<br />
        <input [formControl]="lastName" />
      </ng-template>
    </ng-container>

    <ng-container [formStepperSection]="contact" formStepperTitle="Contact">
      <ng-template [formStepperStep]="email" formStepperTitle="Email" formStepperPath="email">
        Email:<br />
        <input [formControl]="email" />
      </ng-template>
    </ng-container>

    <ng-container [formStepperSection]="address" formStepperTitle="Address">
      <ng-template [formStepperStep]="street" formStepperTitle="Street" formStepperPath="street">
        Street:<br />
        <input [formControl]="street" />
      </ng-template>

      <ng-template
        [formStepperStep]="zipCodeAndCity"
        formStepperTitle="Zip code and city"
        formStepperPath="zip-code-and-city"
      >
        Zip code:<br />
        <input [formControl]="zipCode" /><br />
        City:<br />
        <input [formControl]="city" />
      </ng-template>
    </ng-container>
  </ng-container>
</form>

<pre style="width: 300px; margin: auto">Value: {{ formGroup.value | json }}</pre>

<a routerLink="/form-stepper/street"> street </a>
<a routerLink="/form-stepper/zip-code-and-city"> zip-code-and-city </a>
<a routerLink="/form-stepper/oops"> oops </a>
