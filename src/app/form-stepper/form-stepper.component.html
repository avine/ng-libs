<form [formGroup]="formGroup" (ngSubmit)="submitForm()">
  <ng-container formStepperContainer #stepper="stepper">
    <div style="display: flex">
      <div>
        <ng-container
          *ngIf="stepper.stepTemplate$ | async as stepTemplate"
          [ngTemplateOutlet]="stepTemplate"
        ></ng-container>
      </div>

      <div>
        <form-stepper-nav></form-stepper-nav>
      </div>
    </div>

    <div>
      <button (click)="stepper.prevStep()">Prev</button>

      <!-- ! TODO: the [type] property does not work properly to submit the form at the right time... -->
      <button
        [type]="(stepper.isLastStep$ | async) ? 'submit' : 'button'"
        [disabled]="(stepper.isStepValid$ | async) === false"
        (click)="stepper.nextStep()"
      >
        Next ({{ stepper.isLastStep$ | async }})
      </button>
    </div>

    <ng-container [formStepperSection]="fullName" title="Full name" urlPath="full-name">
      <ng-template [formStepperStep]="firstName" title="First name" urlPath="first-name">
        First name:<br />
        <input [formControl]="firstName" />
      </ng-template>

      <ng-template [formStepperStep]="lastName" title="Last name" urlPath="last-name">
        Last name:<br />
        <input [formControl]="lastName" />
      </ng-template>
    </ng-container>

    <ng-container [formStepperSection]="address" title="Address" urlPath="address">
      <ng-template [formStepperStep]="street" title="Street" urlPath="street">
        Street:<br />
        <input [formControl]="street" />
      </ng-template>

      <ng-template [formStepperStep]="zipCodeAndCity" title="Zip code and city" urlPath="zip-code-and-city">
        Zip code:<br />
        <input [formControl]="zipCode" /><br />
        City:<br />
        <input [formControl]="city" />
      </ng-template>
    </ng-container>
  </ng-container>
</form>

<pre>Value: {{ formGroup.value | json }}</pre>

<a routerLink="/form-stepper/address-street">1</a>
<a routerLink="/form-stepper/address-zip-code-and-city">2</a>
